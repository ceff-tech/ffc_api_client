<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate FFC Results and Plots for Gage Data — evaluate_gage_alteration • ffcAPIClient</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate FFC Results and Plots for Gage Data — evaluate_gage_alteration" />
<meta property="og:description" content="This is a shortcut function that does most of the heavy lifting for you. Runs data through the FFC and transforms all results." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ffcAPIClient</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ceff-steps.html">Use ffcAPIClient to Follow CEFF Steps</a>
    </li>
    <li>
      <a href="../articles/index.html">FFC in R: Simple Functional Flows Calculator API Client</a>
    </li>
    <li>
      <a href="../articles/run_multiple_gages.html">Use ffcAPIClient to Run Multiple Gages</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate FFC Results and Plots for Gage Data</h1>
    
    <div class="hidden name"><code>evaluate_gage_alteration.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is a shortcut function that does most of the heavy lifting for you. Runs data through the FFC and transforms all results.</p>
    </div>

    <pre class="usage"><span class='fu'>evaluate_gage_alteration</span>(
  <span class='no'>gage_id</span>,
  <span class='no'>token</span>,
  <span class='no'>comid</span>,
  <span class='no'>plot_output_folder</span>,
  <span class='no'>plot_results</span>,
  <span class='no'>force_comid_lookup</span>,
  <span class='no'>return_processor</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gage_id</th>
      <td><p>The USGS gage ID to pull timeseries data from</p></td>
    </tr>
    <tr>
      <th>token</th>
      <td><p>The token used to access the online FFC - see the Github repository's README under Setup for how to get this.</p></td>
    </tr>
    <tr>
      <th>comid</th>
      <td><p>The stream segment COMID where the gage is located. In the past, the package looked this information up automatically
but we discovered that our method for looking gage COMIDs up was error prone, and there is no authoritative dataset
that relates gages to COMIDs. It will be most accurate if you provide the comid yourself by looking it up (don't
use nhdPlusTools with the latitude and longitude - that's what we did that was error prone). You can re-enable
the lookup behavior setting the <code>force_comid_lookup</code> parameter to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>plot_output_folder</th>
      <td><p>Optional - when not provided, plots are displayed interactively only. When provided, they are
displayed interactively and saved as files named by the functional flow componenent into the provided folder</p></td>
    </tr>
    <tr>
      <th>plot_results</th>
      <td><p>boolean, default <code>TRUE</code> - when <code>TRUE</code>, results are plotted to the screen and any folder provided. When
FALSE, does no plotting.</p></td>
    </tr>
    <tr>
      <th>force_comid_lookup</th>
      <td><p>default <code>FALSE</code>. When <code>TRUE</code>, the COMID for the segment will be automatically
looked up based on the latitude and longitude. This method is error prone and it is advised you leave it off.
Where an error is known, the package corrects the COMID based on an internal list of gage/comid pairs (eg:
Jones Bar on the Yuba River). It is recommended you leave this as FALSE and look up the comid yourself to
ensure that you choose the correct mainstem or tributary near stream junctions, but if you need to bulk
process data, this parameter is available to retrieve COMIDs.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If you provide it a USGS gage ID and your token to access the online functional flows calculator, this function then:</p>
<p>1. Download the timeseries data for the USGS gage</p>
<p>2. Look up the predicted unimpaired metric values for the gage's stream segment</p>
<p>3. Send the timeseries data through the functional flows calculator</p>
<p>4. Transform the results into a data frame with rows for years and metric values as columns</p>
<p>5. Produce percentiles for those metric values using R's recommended quantile method type 7 (which may return differing results from other methods, Excel, etc)</p>
<p>6. Transform the dimensionless reference hydrograph data into a data frame</p>
<p>7. Determines the alteration by flow metric for the observed versus predicted values</p>
<p>8. Output plots comparing the observed timeseries data with the predicted unimpaired metric values.</p>
<p>Items 4, 5, 6, and 7 are returned back to the caller as a list with keys "ffc_results", "ffc_percentiles", "drh_data", and "alteration"
for any further processing. The list also includes "predicted_percentiles", with the predicted flow metrics for the segment.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://nicksantos.com'>Nick Santos</a>, <a href='https://ryanpeek.github.io/'>Ryan Peek</a>, <a href='https://watershed.ucdavis.edu/people/alyssa-obester'>Alyssa Obester</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


